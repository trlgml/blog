(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{408:function(t,a,r){"use strict";r.r(a);var s=r(28),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),r("blockquote",[r("p",[t._v("通过在网站中的输入框写入 script 脚本或引入 script 文件，如果网站未过滤输入内容，将会解析该脚本。")])]),t._v(" "),r("blockquote",[r("p",[t._v("如果脚本的功能是获取网站的 cookie，cookie 中又保留一些敏感信息，则后果有可能很严重。")])]),t._v(" "),r("h2",{attrs:{id:"类型"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#类型"}},[t._v("#")]),t._v(" 类型")]),t._v(" "),r("ul",[r("li",[t._v("反射型攻击：脚本当作 url 的参数进行注入执行")]),t._v(" "),r("li",[t._v("存储型攻击：脚本被存储到 DB 后，读取时被解析执行")])]),t._v(" "),r("h2",{attrs:{id:"注入点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#注入点"}},[t._v("#")]),t._v(" 注入点")]),t._v(" "),r("p",[t._v("4.1 HTML 节点")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("<div>${content}</div>\ncontent 的内容为 <script>alert(1)<\/script>，脚本攻击后，会变成：\n<div><script>alert(1)<\/script></div>\n页面将会执行 alert(1)。\n")])])]),r("p",[t._v("4.2 HTML 属性")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v('<img src="${imgSrc}" />\nimgSrc 的内容为 2” onerror=”alert(2)，脚本攻击后，会变成：\n<img src="2" onerror="alert(2)" />\n页面将会执行 alert(2)。\n')])])]),r("p",[t._v("4.3 Javascript 代码")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v('<script>\n    var mydata = "${data}";\n<\/script>\ndata 的内容为 hello”;alert(3);”，脚本攻击后，会变成：\n<script>\n    var mydata = "hello";alert(3);"";\n<\/script>\n页面将会执行 alert(3)。\n')])])]),r("p",[t._v("4.4 富文本")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("富文本需要保留 HTML 文本，HTML 文本中就有 XSS 攻击的风险。\n")])])]),r("h2",{attrs:{id:"防御"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#防御"}},[t._v("#")]),t._v(" 防御")]),t._v(" "),r("p",[t._v("浏览器自带一些防御能力，但只能防御 XSS 反射类型攻击，且只能防御上文描述的前二个注入点。")]),t._v(" "),r("p",[t._v("防御手段原理也很简单，就是将可能会执行脚本的标签或属性进行转义和过滤。")]),t._v(" "),r("p",[t._v("5.1 HTML 节点的防御")]),t._v(" "),r("p",[t._v("将 < 和 > 转义成 &lt； 和 &gt；。")]),t._v(" "),r("p",[t._v("5.2 HTML 属性的防御")]),t._v(" "),r("p",[t._v("将 “ 转义成 &quto；。")]),t._v(" "),r("p",[t._v("5.3 Javascript 代码的防御")]),t._v(" "),r("p",[t._v("将 “ 转义成 \\“ 。")]),t._v(" "),r("p",[t._v("5.3 富文本的防御")]),t._v(" "),r("p",[t._v("使用白名单保留部分标签和属性。")])])}),[],!1,null,null,null);a.default=e.exports}}]);