(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{467:function(t,v,_){"use strict";_.r(v);var a=_(30),e=Object(a.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("blockquote",[_("p",[t._v("使用缓存通常是请求先访问缓存数据，如果存在的话就直接返回数据，如果不存在的话就会回到数据库中，读取后将数据写入到缓存中并返回数据")])]),t._v(" "),_("h2",{attrs:{id:"缓存穿透"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缓存穿透"}},[t._v("#")]),t._v(" 缓存穿透")]),t._v(" "),_("blockquote",[_("p",[t._v("请求一个数据库不存在的id值。一般先请求缓存，缓存不存在，之后命中db，db查询不到。这样缓存形同虚设，每次都请求到db。")])]),t._v(" "),_("ol",[_("li",[_("p",[t._v("查询不到数据设置一个空值，并设置过期时间。")])]),t._v(" "),_("li",[_("p",[t._v("对业务id进行验证，防止非法请求。")])])]),t._v(" "),_("h2",{attrs:{id:"缓存击穿"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缓存击穿"}},[t._v("#")]),t._v(" 缓存击穿")]),t._v(" "),_("blockquote",[_("p",[t._v("缓存中没有数据，数据库有数据。由于并发数特别多，同时没有读取到缓存数据，导致一起去读取db，导致db压力过大。")])]),t._v(" "),_("ol",[_("li",[_("p",[t._v("数据永不过期，设置更新数据机制")])]),t._v(" "),_("li",[_("p",[t._v("互斥锁，只有有锁的去读。")])])]),t._v(" "),_("h2",{attrs:{id:"缓存雪崩"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缓存雪崩"}},[t._v("#")]),t._v(" 缓存雪崩")]),t._v(" "),_("blockquote",[_("p",[t._v("大批数据缓存过期，同时命中db，导致db压力过大。")])]),t._v(" "),_("ol",[_("li",[_("p",[t._v("热数据永不过期")])]),t._v(" "),_("li",[_("p",[t._v("过期时间添加一个随机值，避免同时过期")])])]),t._v(" "),_("h2",{attrs:{id:"数据使用场景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据使用场景"}},[t._v("#")]),t._v(" 数据使用场景")]),t._v(" "),_("ul",[_("li",[t._v("读取命中缓存：读取缓存成功，返回。")]),t._v(" "),_("li",[t._v("读取未命中缓存：读取db，写入缓存，返回。")]),t._v(" "),_("li",[t._v("更新数据：写入db，再让缓存时效。")])]),t._v(" "),_("blockquote",[_("p",[t._v("数据需要同时更新缓存和数据库两个地方，更新时序不同会有不同的结果。")])]),t._v(" "),_("h2",{attrs:{id:"一些问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一些问题"}},[t._v("#")]),t._v(" 一些问题")]),t._v(" "),_("ul",[_("li",[t._v("过期还是不过期缓存数据")]),t._v(" "),_("li",[t._v("维度拆解")]),t._v(" "),_("li",[t._v("大value")]),t._v(" "),_("li",[t._v("热缓存问题")]),t._v(" "),_("li",[t._v("数据预热")]),t._v(" "),_("li",[t._v("缓存实例故障快速恢复")])]),t._v(" "),_("p",[_("a",{attrs:{href:"https://mp.weixin.qq.com/s/QidAD9OuVdEXFqxRMPx5lQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),_("OutboundLink")],1)])])}),[],!1,null,null,null);v.default=e.exports}}]);