<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据库相关操作 | 妍辰~</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="manifest" href="/blog/manifest.json">
    <script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?3673cdd1fee1a108e55a88e9d67f4f07";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })()</script>
    <meta name="description" content="JavaScript Node.js">
    <meta name="keywords" itemprop="keywords" content="JavaScript Node.js">
    <meta property="og:title" content="JavaScript Node.js">
    <meta property="og:description" content="JavaScript Node.js">
    
    <link rel="preload" href="/blog/assets/css/0.styles.0001043b.css" as="style"><link rel="preload" href="/blog/assets/js/app.dd2d7f56.js" as="script"><link rel="preload" href="/blog/assets/js/2.915c986d.js" as="script"><link rel="preload" href="/blog/assets/js/73.51e7695f.js" as="script"><link rel="preload" href="/blog/assets/js/4.6b921ba0.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.97c5590d.js"><link rel="prefetch" href="/blog/assets/js/11.f57a3b53.js"><link rel="prefetch" href="/blog/assets/js/12.f08c9a25.js"><link rel="prefetch" href="/blog/assets/js/13.2875fc01.js"><link rel="prefetch" href="/blog/assets/js/14.989eb0e2.js"><link rel="prefetch" href="/blog/assets/js/15.01bb6213.js"><link rel="prefetch" href="/blog/assets/js/16.c9a55325.js"><link rel="prefetch" href="/blog/assets/js/17.8cbaf86e.js"><link rel="prefetch" href="/blog/assets/js/18.670c052a.js"><link rel="prefetch" href="/blog/assets/js/19.741a5c18.js"><link rel="prefetch" href="/blog/assets/js/20.989ba9dd.js"><link rel="prefetch" href="/blog/assets/js/21.207d296a.js"><link rel="prefetch" href="/blog/assets/js/22.05cb2df3.js"><link rel="prefetch" href="/blog/assets/js/23.46c8fde9.js"><link rel="prefetch" href="/blog/assets/js/24.421ad437.js"><link rel="prefetch" href="/blog/assets/js/25.e53e02b0.js"><link rel="prefetch" href="/blog/assets/js/26.db5d3d0e.js"><link rel="prefetch" href="/blog/assets/js/27.39a7cf86.js"><link rel="prefetch" href="/blog/assets/js/28.53d86d7b.js"><link rel="prefetch" href="/blog/assets/js/29.a95502b1.js"><link rel="prefetch" href="/blog/assets/js/3.8a3308cd.js"><link rel="prefetch" href="/blog/assets/js/30.b442c6e4.js"><link rel="prefetch" href="/blog/assets/js/31.1eec4d31.js"><link rel="prefetch" href="/blog/assets/js/32.593c6f74.js"><link rel="prefetch" href="/blog/assets/js/33.5ed5f22c.js"><link rel="prefetch" href="/blog/assets/js/34.e2b15c54.js"><link rel="prefetch" href="/blog/assets/js/35.c8cd79ba.js"><link rel="prefetch" href="/blog/assets/js/36.21ffc7a8.js"><link rel="prefetch" href="/blog/assets/js/37.a8fbef26.js"><link rel="prefetch" href="/blog/assets/js/38.b4f5f7c9.js"><link rel="prefetch" href="/blog/assets/js/39.eaed029d.js"><link rel="prefetch" href="/blog/assets/js/40.5b059575.js"><link rel="prefetch" href="/blog/assets/js/41.b07ebf4e.js"><link rel="prefetch" href="/blog/assets/js/42.77077f52.js"><link rel="prefetch" href="/blog/assets/js/43.191c1b14.js"><link rel="prefetch" href="/blog/assets/js/44.cc377ab7.js"><link rel="prefetch" href="/blog/assets/js/45.cdce27b0.js"><link rel="prefetch" href="/blog/assets/js/46.92c9e29b.js"><link rel="prefetch" href="/blog/assets/js/47.667cc415.js"><link rel="prefetch" href="/blog/assets/js/48.63728fd3.js"><link rel="prefetch" href="/blog/assets/js/49.31587175.js"><link rel="prefetch" href="/blog/assets/js/5.daa76a2a.js"><link rel="prefetch" href="/blog/assets/js/50.2ba1153f.js"><link rel="prefetch" href="/blog/assets/js/51.1fa52def.js"><link rel="prefetch" href="/blog/assets/js/52.8e35aa7f.js"><link rel="prefetch" href="/blog/assets/js/53.5c6daacb.js"><link rel="prefetch" href="/blog/assets/js/54.22f91ae4.js"><link rel="prefetch" href="/blog/assets/js/55.41297eed.js"><link rel="prefetch" href="/blog/assets/js/56.ddd44ec3.js"><link rel="prefetch" href="/blog/assets/js/57.63d2233d.js"><link rel="prefetch" href="/blog/assets/js/58.622ee03f.js"><link rel="prefetch" href="/blog/assets/js/59.80b206e3.js"><link rel="prefetch" href="/blog/assets/js/6.129eb124.js"><link rel="prefetch" href="/blog/assets/js/60.d302fdfa.js"><link rel="prefetch" href="/blog/assets/js/61.29101914.js"><link rel="prefetch" href="/blog/assets/js/62.bce17619.js"><link rel="prefetch" href="/blog/assets/js/63.19c1de70.js"><link rel="prefetch" href="/blog/assets/js/64.7703b384.js"><link rel="prefetch" href="/blog/assets/js/65.e27c14b8.js"><link rel="prefetch" href="/blog/assets/js/66.5e368369.js"><link rel="prefetch" href="/blog/assets/js/67.efe15841.js"><link rel="prefetch" href="/blog/assets/js/68.498ca567.js"><link rel="prefetch" href="/blog/assets/js/69.34e8c591.js"><link rel="prefetch" href="/blog/assets/js/7.286986c8.js"><link rel="prefetch" href="/blog/assets/js/70.5bf3717e.js"><link rel="prefetch" href="/blog/assets/js/71.457cba84.js"><link rel="prefetch" href="/blog/assets/js/72.286ef29b.js"><link rel="prefetch" href="/blog/assets/js/74.c54d511e.js"><link rel="prefetch" href="/blog/assets/js/75.8e2f57bc.js"><link rel="prefetch" href="/blog/assets/js/76.2ac816ad.js"><link rel="prefetch" href="/blog/assets/js/77.0ae9c5f3.js"><link rel="prefetch" href="/blog/assets/js/8.c961719e.js"><link rel="prefetch" href="/blog/assets/js/9.2bcc0f4e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.0001043b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">妍辰~</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/home/" class="nav-link">
  目录
</a></div><div class="nav-item"><a href="https://github.com/trlgml/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/home/" class="nav-link">
  目录
</a></div><div class="nav-item"><a href="https://github.com/trlgml/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/%E6%95%B0%E6%8D%AE%E5%BA%93/" aria-current="page" class="sidebar-link">数据库</a></li><li><a href="/blog/数据库/redis命令.html" class="sidebar-link">redis命令</a></li><li><a href="/blog/数据库/缓存的使用.html" class="sidebar-link">缓存的使用</a></li><li><a href="/blog/数据库/索引的设计和使用.html" class="sidebar-link">索引的设计和使用</a></li><li><a href="/blog/数据库/mysql语句.html" class="active sidebar-link">mysql语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/数据库/mysql语句.html#数据库相关操作" class="sidebar-link">数据库相关操作</a></li><li class="sidebar-sub-header"><a href="/blog/数据库/mysql语句.html#表相关操作" class="sidebar-link">表相关操作</a></li><li class="sidebar-sub-header"><a href="/blog/数据库/mysql语句.html#数据相关操作" class="sidebar-link">数据相关操作</a></li><li class="sidebar-sub-header"><a href="/blog/数据库/mysql语句.html#mysql-事物" class="sidebar-link">MySql 事物</a></li><li class="sidebar-sub-header"><a href="/blog/数据库/mysql语句.html#mysql-索引" class="sidebar-link">MySql 索引</a></li></ul></li><li><a href="/blog/数据库/mysql存储引擎.html" class="sidebar-link">mysql存储引擎</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="数据库相关操作"><a href="#数据库相关操作" class="header-anchor">#</a> 数据库相关操作</h2> <ul><li>连接数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mysql -u root -p password
</code></pre></div><ul><li>创建数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>create database 数据库名;
</code></pre></div><ul><li>显示所有数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>show databases;
</code></pre></div><ul><li>使用数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>use 数据库名;
</code></pre></div><ul><li>删除数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>drop database 数据库名;
</code></pre></div><h2 id="表相关操作"><a href="#表相关操作" class="header-anchor">#</a> 表相关操作</h2> <ul><li>创建数据库表</li></ul> <div class="language- extra-class"><pre class="language-text"><code>create table 表名 (
  列名1 数据类型1,
  列命2 数据类型2,
  ...
  列名n 数据类型n,
  primary key 列名(主键)
);
</code></pre></div><ul><li>查看数据库中的所有表</li></ul> <div class="language- extra-class"><pre class="language-text"><code>show tables;
</code></pre></div><ul><li>查看数据库表结构</li></ul> <div class="language- extra-class"><pre class="language-text"><code>desc 表名;
</code></pre></div><ul><li>删除表</li></ul> <div class="language- extra-class"><pre class="language-text"><code>drop table 表名;
</code></pre></div><ul><li>修改数据库表名</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table 表名 rename to 新表名;
</code></pre></div><ul><li>添加列</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table 表名 add 列名 数据类型;
</code></pre></div><ul><li>删除列</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table 表名 drop 列名;
</code></pre></div><h2 id="数据相关操作"><a href="#数据相关操作" class="header-anchor">#</a> 数据相关操作</h2> <ul><li>添加数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);
添加列要和值相对应

insert into 表名 values(值1,值2,...值n);
值要包含表中所有的列
</code></pre></div><ul><li>删除数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>delete from 表名 where 条件;
删除满足条件的数据。

delete from 表名;
默认删除表里的所有数据
</code></pre></div><ul><li>修改数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>update 表名 set 列名1 = 值1, 列名2 = 值2,... where 条件
修改满足条件的数据

update 表名 set 列名1 = 值1, 列名2 = 值2,...;
如果是不加条件，则修改所有的数据。
</code></pre></div><ul><li>查询数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select 列命 from 表名，
查询某列的数据

select * from 表名
查询所有列的数据

select distinct 列命 from 表名，
查询去重后的数据
</code></pre></div><ul><li>条件语句
<ul><li>and</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where 条件1 and 条件2;
查询同时满足条件1和条件2的数据
</code></pre></div><ul><li>or</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where 条件1 or 条件2;
查询满足条件1或条件2的数据
</code></pre></div><ul><li>not</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where not 条件1;
查询不满足条件1的数据
</code></pre></div><ul><li>is null</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where 列名 is null;
查询某列为空的数据
</code></pre></div><ul><li>is not null</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where 列名 is not null;
查询某列非空的数据
</code></pre></div><ul><li>between</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where 列名 between 值1 and 值2;
查询某列在值1和值2之间的数据
</code></pre></div><ul><li>like</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where 列名 like 'hello%';
查询所有以hello开头的数据，like结合%使用，其中%代表0到任意个字符

select * from 表名 where 列名 like 'hello_';
查询所有以hello开头并且后面只跟一个字符的数据，like结合_使用，_代表1个字符
</code></pre></div><ul><li>in</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from 表名 where 列名in (值1,值2,...);
查询某列在某区域内的数据
</code></pre></div></li> <li>排序和分页</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select* from 表名 order by 列名;
通过该列进行升序排序

select* from 表名 order by 列名 desc;
通过该列进行降序排序

select* from 表名 limit offset,pagesize;
查询索引从offset(第一个数据索引是0)开始，每页显示pagesize个元素

select* from user limit 0,10;
查询出的用户表数据，从第1个用户开始显示，每页显示10个

select* from user limit 10,10;
查询出的用户表数据，从第10个用户开始显示，每页显示10个
</code></pre></div><ul><li>分组查询</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select 字段名 from 表名 group by 字段名
select 字段名 count(字段名) from 表名 group by 字段名
</code></pre></div><ul><li>联表查询</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select 字段名 from 表名A inner join 表名B on 条件
select 字段名 from 表名A left join 表名B on 条件
select 字段名 from 表名A rigth join 表名B on 条件
</code></pre></div><h2 id="mysql-事物"><a href="#mysql-事物" class="header-anchor">#</a> MySql 事物</h2> <ul><li>开启事物<code>start transaction;</code></li> <li>提交事物，数据写回磁盘<code>commit;</code></li> <li>回滚事物<code>rollback;</code></li> <li>查看事物是否开启自动提交<code>show variables like 'autocommit';</code></li> <li>关闭事物自动提交<code>set autocommit=off;</code></li> <li>查看事物隔离级别<code>select @@transaction_isolation;</code></li> <li>设置隔离级别为读未提交<code>set session transaction isolation level read uncommitted;</code></li> <li>设置隔离界别为读已提交<code>set session transaction isolation level read committed;</code></li> <li>设置隔离级别为可重复读<code>set session transaction isolation level repeatable read;</code></li> <li>设置隔离界别为可串行化<code>set session transaction isolation level serializable;</code></li></ul> <h2 id="mysql-索引"><a href="#mysql-索引" class="header-anchor">#</a> MySql 索引</h2> <blockquote><p>索引分为主键索引，唯一索引，普通索引，组合索引，全文索引。</p></blockquote> <ul><li>查看表中数据数量<code>select count(*) from 表名;</code></li> <li>查看表中索引<code>show index from 表名;</code></li> <li>删除索引<code>drop index 索引名 on 表名;</code></li> <li>删除主键索引，也就是删除了该字段<code>alter table 表名 drop 主键字段名;</code></li> <li>主键索引</li></ul> <div class="language- extra-class"><pre class="language-text"><code>表结构
create table test(
   id int(11),
   name varchar(25),
   primary key (id)
);

创建表的时候添加索引
alter table test add constraint id primary key(id);
</code></pre></div><ul><li>唯一索引</li></ul> <div class="language- extra-class"><pre class="language-text"><code>表结构
create table test(
	id int(11),
	name varchar(25),
	unique index_unique_test_name (name)
);

创建表之后创建唯一索引
create unique index index_unique_test_name on test(name);

修改表结构为唯一索引
alter table test add unique index index_unique_test_name (name);
</code></pre></div><ul><li>普通索引</li></ul> <div class="language- extra-class"><pre class="language-text"><code>表结构
create table test(
	id int(11),
	name varchar(25),
	index index_test_name (name)
);

创建表之后创建普通索引
create index index_test_name on test(name);

修改表结构为普通索引
alter table test add index index_test_name (name);
</code></pre></div><ul><li>组合索引</li></ul> <div class="language- extra-class"><pre class="language-text"><code>表结构

create table test(
	id int(11),
	name varchar(25),
	index index_test_id_name (id,name)
);

创建表之后创建组合索引
create index index_test_id_name on test(id,name);

修改表结构为普通索引
alter table test add index index_test_id_name (id,name);
</code></pre></div><ul><li></li></ul> <p>全文索引</p> <div class="language- extra-class"><pre class="language-text"><code>表结构
create table test(
	id int(11),
	name varchar(25),
	content text,
	fulltext (text)
);

创建表之后创建组合索引
create fulltext index index_content on test(content);

修改表结构为普通索引
alter table test add fulltext index index_content (content);
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/数据库/索引的设计和使用.html" class="prev">
        索引的设计和使用
      </a></span> <span class="next"><a href="/blog/数据库/mysql存储引擎.html">
        mysql存储引擎
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.dd2d7f56.js" defer></script><script src="/blog/assets/js/2.915c986d.js" defer></script><script src="/blog/assets/js/73.51e7695f.js" defer></script><script src="/blog/assets/js/4.6b921ba0.js" defer></script>
  </body>
</html>
